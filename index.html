<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zawla Comic</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

  <!-- ðŸŽ¨ Unified Theme -->
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #aee6ff, #dcd0ff, #c8f7c5);
      background-size: 400% 400%;
      animation: gradientShift 20s ease infinite;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: #333;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    h1 {
      color: #4a3aff;
      font-weight: 700;
      margin-bottom: 15px;
    }

    p {
      color: #555;
    }

    .navbar-brand {
      color: #4a3aff !important;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .nav-link:hover,
    .btn:hover {
      transform: scale(1.05);
      transition: 0.2s;
    }

    footer {
      background: rgba(255, 255, 255, 0.8);
      text-align: center;
      color: #555;
      font-size: 0.9rem;
      padding: 12px 0;
      margin-top: auto;
    }

    /* Button Grid */
    .grid-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 25px;
      max-width: 600px;
      margin: 50px auto;
    }

    .main-btn {
      background: white;
      border: none;
      border-radius: 15px;
      padding: 30px 20px;
      font-weight: 600;
      font-size: 1.1rem;
      color: #333;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.25s ease;
    }

    .main-btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
    }

    /* Comic Story Boxes */
    .story-gallery {
      background: rgba(255, 255, 255, 0.85);
      padding: 60px 0;
      text-align: center;
    }

    .story-gallery h3 {
      color: #4a3aff;
      font-weight: 600;
      margin-bottom: 30px;
    }

    .story-box {
      background: white;
      border-radius: 15px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .story-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
    }

    .story-img {
      width: 100%;
      height: 200px;
      background: #eaeaea;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #777;
      font-size: 1rem;
    }

    .story-caption {
      padding: 15px;
      font-size: 0.95rem;
      color: #555;
    }

    .explanation {
      max-width: 800px;
      margin: 30px auto;
      text-align: center;
      color: #444;
      font-size: 1rem;
      line-height: 1.6;
    }
  </style>
</head>

<body>
  <!-- ðŸŒŸ Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">Zawla Comic</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navmenu">
        <ul class="navbar-nav ms-auto align-items-center gap-3">
          <li class="nav-item"><a class="nav-link" href="create.html">Create Story</a></li>
          <li class="nav-item"><a class="nav-link" href="library.html">My Library</a></li>
          <li class="nav-item"><a class="nav-link" href="tutorial.html">Tutorial</a></li>
        </ul>

        <!-- User info and logout -->
        <div class="ms-4 d-flex align-items-center gap-3">
          <span id="userInfo" class="fw-semibold text-primary d-none"></span>
          <button id="logoutBtn" class="btn btn-outline-danger btn-sm d-none">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- ðŸŽ¨ Main Hero Section -->
  <div class="container text-center mt-5">
    <h1>Welcome to Zawla Comic!</h1>
    <p>Create your own fun, colorful, and kid-friendly stories â€” powered by AI and your imagination.</p>

    <!-- ðŸ’¬ Website Explanation -->
    <div class="explanation">
      Zawla Comic helps children and families bring their stories to life through the power of AI.  
      Create your own illustrated adventures, learn storytelling skills, and collect your comics in your personal library.  
      Safe, creative, and made for curious minds â€” Zawla makes learning fun through imagination.
    </div>

    <!-- ðŸŸ© Button Grid (default when logged out) -->
    <div class="grid-buttons">
      <a href="tutorial.html" class="btn main-btn">Tutorial</a>
      <a href="create.html" class="btn main-btn">Start Creating</a>
      <a href="library.html" class="btn main-btn">My Library</a>
      <!-- This is your "Google login button" that just goes to login.html -->
      <a href="login.html" class="btn main-btn" style="background:#d9534f; color:white;">
        Login / Sign up
      </a>
    </div>
  </div>

  <!-- ðŸ–¼ï¸ Story Boxes (Comic Placeholders) -->
  <div class="story-gallery">
    <h3>Story Examples</h3>
    <div class="container">
      <div class="row justify-content-center g-4">
        <div class="col-md-4 col-sm-6">
          <div class="story-box">
            <div class="story-img">Your Comic #1</div>
            <div class="story-caption">A brave adventure awaits here soon...</div>
          </div>
        </div>
        <div class="col-md-4 col-sm-6">
          <div class="story-box">
            <div class="story-img">Your Comic #2</div>
            <div class="story-caption">An exciting friendship story will go here!</div>
          </div>
        </div>
        <div class="col-md-4 col-sm-6">
          <div class="story-box">
            <div class="story-img">Your Comic #3</div>
            <div class="story-caption">A colorful fantasy comic placeholder</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ’œ Footer -->
  <footer>
    Â© 2025 Zawla Comic â€“ Created by Zhenar Kochar
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ðŸ”¥ Firebase: just listening to auth state here -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged,
      signOut
    } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyApQHXAfuTWh_GFsyB7fleGuvxAeODfB1A",
      authDomain: "zawlacomic.firebaseapp.com",
      projectId: "zawlacomic",
      storageBucket: "zawlacomic.firebasestorage.app",
      messagingSenderId: "225177170539",
      appId: "1:225177170539:web:1dea7258f277ffa412b72e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const gridButtons = document.querySelector(".grid-buttons");
    const userInfo = document.getElementById("userInfo");
    const logoutBtn = document.getElementById("logoutBtn");

    // ðŸ” Auth state listener
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // Logged in
        userInfo.textContent = user.displayName || "User";
        userInfo.classList.remove("d-none");
        logoutBtn.classList.remove("d-none");

        // Use block layout instead of grid for the custom layout
        gridButtons.style.display = "block";

        // Custom layout: Tutorial + Start Creating, then My Library centered under them
        gridButtons.innerHTML = `
          <div class="d-flex justify-content-center gap-4 flex-wrap mb-3">
            <a href="tutorial.html" 
               class="btn main-btn"
               style="min-width: 220px; border-radius: 15px; font-size:1.1rem;">
              Tutorial
            </a>

            <a href="create.html" 
               class="btn main-btn"
               style="min-width: 220px; border-radius: 15px; font-size:1.1rem;">
              Start Creating
            </a>
          </div>

          <div class="d-flex justify-content-center mt-3">
            <a href="library.html" 
               class="btn main-btn"
               style="width: 350px; border-radius: 20px; font-size:1.2rem; font-weight:600;">
              My Library
            </a>
          </div>
        `;
      } else {
        // Logged out
        userInfo.classList.add("d-none");
        logoutBtn.classList.add("d-none");

        // Restore grid layout + default buttons
        gridButtons.style.display = "grid";
        gridButtons.innerHTML = `
          <a href="tutorial.html" class="btn main-btn">Tutorial</a>
          <a href="create.html" class="btn main-btn">Start Creating</a>
          <a href="library.html" class="btn main-btn">My Library</a>
          <a href="login.html" class="btn main-btn" style="background:#d9534f; color:white;">
            Login / Sign up
          </a>
        `;
      }
    });

    // ðŸ”“ Logout
    logoutBtn.addEventListener("click", async () => {
      try {
        await signOut(auth);
        window.location.reload();
      } catch (error) {
        console.error("Logout error:", error);
        alert("Error while signing out.");
      }
    });
  </script>
</body>
</html>
